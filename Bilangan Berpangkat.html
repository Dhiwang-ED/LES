<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LKPD Bilangan Berpangkat - Kelas 9</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .math-input {
            font-family: 'Times New Roman', serif;
            font-size: 18px;
            line-height: 1.8;
        }
        
        .fraction-display {
            display: inline-block;
            vertical-align: middle;
            text-align: center;
            margin: 0 2px;
        }
        
        .fraction-display .numerator {
            display: block;
            border-bottom: 1px solid #333;
            padding: 0 4px 2px;
            font-size: 0.9em;
        }
        
        .fraction-display .denominator {
            display: block;
            padding: 2px 4px 0;
            font-size: 0.9em;
        }
        .superscript {
            vertical-align: super;
            font-size: 0.7em;
        }
        .subscript {
            vertical-align: sub;
            font-size: 0.7em;
        }
        .fraction {
            display: inline-block;
            vertical-align: middle;
            text-align: center;
        }
        .fraction-top {
            border-bottom: 1px solid #000;
            padding: 0 2px;
        }
        .fraction-bottom {
            padding: 0 2px;
        }
        .math-display {
            font-family: 'Times New Roman', serif;
            font-size: 20px;
            line-height: 1.5;
        }
        .keyboard-btn {
            transition: all 0.2s;
        }
        .keyboard-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .keyboard-btn:active {
            transform: translateY(0);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-6">
        <!-- Header -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h1 class="text-3xl font-bold text-center text-indigo-800 mb-2">üìö LKPD Bilangan Berpangkat</h1>
            <p class="text-center text-gray-600">Kelas 9 - Matematika</p>
            <div class="flex justify-center mt-4 space-x-4">
                <span class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm">Bilangan Berpangkat Positif</span>
                <span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm">Bilangan Berpangkat Negatif</span>
                <span class="bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm">Sifat Bilangan Berpangkat</span>
            </div>
        </div>

        <div class="max-w-7xl mx-auto">
            <!-- Materi Section -->
            <div>
                <!-- Tab Navigation -->
                <div class="bg-white rounded-xl shadow-lg mb-6">
                    <div class="grid grid-cols-3 md:grid-cols-7 border-b text-sm">
                        <button onclick="showTab('definisi')" id="tab-definisi" class="py-3 px-2 text-center font-semibold text-indigo-600 border-b-2 border-indigo-600">üìö Definisi</button>
                        <button onclick="showTab('positif')" id="tab-positif" class="py-3 px-2 text-center font-semibold text-gray-500 hover:text-indigo-600">‚ûï Pangkat Positif</button>
                        <button onclick="showTab('negatif')" id="tab-negatif" class="py-3 px-2 text-center font-semibold text-gray-500 hover:text-indigo-600">‚ûñ Pangkat Negatif</button>
                        <button onclick="showTab('sifat-kali')" id="tab-sifat-kali" class="py-3 px-2 text-center font-semibold text-gray-500 hover:text-indigo-600">‚úñÔ∏è Sifat Kali</button>
                        <button onclick="showTab('sifat-bagi')" id="tab-sifat-bagi" class="py-3 px-2 text-center font-semibold text-gray-500 hover:text-indigo-600">‚ûó Sifat Bagi</button>
                        <button onclick="showTab('pangkat-pangkat')" id="tab-pangkat-pangkat" class="py-3 px-2 text-center font-semibold text-gray-500 hover:text-indigo-600">üîÑ Pangkat Pangkat</button>
                        <button onclick="showTab('sifat-khusus')" id="tab-sifat-khusus" class="py-3 px-2 text-center font-semibold text-gray-500 hover:text-indigo-600">‚≠ê Sifat Khusus</button>
                    </div>

                    <!-- Tab 1: Definisi -->
                    <div id="content-definisi" class="p-6">
                        <div class="grid lg:grid-cols-2 gap-6">
                            <!-- Materi -->
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 mb-4">üìö Definisi Bilangan Berpangkat</h2>
                                <div class="bg-blue-50 p-4 rounded-lg mb-4">
                                    <p class="mb-3">Bilangan berpangkat adalah perkalian berulang dari bilangan yang sama.</p>
                                    <div class="math-display bg-white p-3 rounded border text-center">
                                        a<sup>n</sup> = a √ó a √ó a √ó ... √ó a (sebanyak n kali)
                                    </div>
                                    <p class="text-sm text-gray-600 mt-2">Dimana: a = bilangan pokok, n = pangkat/eksponen</p>
                                </div>
                                
                                <div class="bg-yellow-50 p-4 rounded-lg">
                                    <h4 class="font-bold text-yellow-800 mb-2">üí° Contoh:</h4>
                                    <div class="space-y-2">
                                        <div class="math-display bg-white p-2 rounded">2<sup>4</sup> = 2 √ó 2 √ó 2 √ó 2 = 16</div>
                                        <div class="math-display bg-white p-2 rounded">3<sup>3</sup> = 3 √ó 3 √ó 3 = 27</div>
                                        <div class="math-display bg-white p-2 rounded">5<sup>1</sup> = 5</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Latihan -->
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold text-gray-800">‚úèÔ∏è Latihan Soal</h3>
                                    <button onclick="generateDefinisiProblems()" class="bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700 transition">üîÑ Soal Baru</button>
                                </div>
                                <div id="definisi-problems" class="space-y-4">
                                    <!-- Problems will be generated here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 2: Pangkat Positif -->
                    <div id="content-positif" class="p-6 hidden">
                        <div class="grid lg:grid-cols-2 gap-6">
                            <!-- Materi -->
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 mb-4">‚ûï Bilangan Berpangkat Positif</h2>
                                <div class="bg-green-50 p-4 rounded-lg mb-4">
                                    <p class="mb-3">Bilangan berpangkat positif adalah bilangan yang dipangkatkan dengan bilangan bulat positif.</p>
                                    <div class="space-y-2">
                                        <div class="math-display bg-white p-2 rounded">2<sup>3</sup> = 2 √ó 2 √ó 2 = 8</div>
                                        <div class="math-display bg-white p-2 rounded">4<sup>2</sup> = 4 √ó 4 = 16</div>
                                        <div class="math-display bg-white p-2 rounded">10<sup>3</sup> = 10 √ó 10 √ó 10 = 1000</div>
                                    </div>
                                </div>
                                
                                <div class="bg-blue-50 p-4 rounded-lg">
                                    <h4 class="font-bold text-blue-800 mb-2">üìù Aturan Khusus:</h4>
                                    <div class="space-y-1 text-sm">
                                        <div>‚Ä¢ Setiap bilangan pangkat 1 = bilangan itu sendiri</div>
                                        <div>‚Ä¢ Setiap bilangan pangkat 0 = 1 (kecuali 0<sup>0</sup>)</div>
                                        <div>‚Ä¢ Pangkat genap dari bilangan negatif = positif</div>
                                        <div>‚Ä¢ Pangkat ganjil dari bilangan negatif = negatif</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Latihan -->
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold text-gray-800">‚úèÔ∏è Latihan Soal</h3>
                                    <button onclick="generatePositifProblems()" class="bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700 transition">üîÑ Soal Baru</button>
                                </div>
                                <div id="positif-problems" class="space-y-4">
                                    <!-- Problems will be generated here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 3: Pangkat Negatif -->
                    <div id="content-negatif" class="p-6 hidden">
                        <div class="grid lg:grid-cols-2 gap-6">
                            <!-- Materi -->
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 mb-4">‚ûñ Bilangan Berpangkat Negatif</h2>
                                <div class="bg-red-50 p-4 rounded-lg mb-4">
                                    <p class="mb-3">Bilangan berpangkat negatif adalah kebalikan dari bilangan berpangkat positif.</p>
                                    <div class="math-display bg-white p-3 rounded border text-center mb-3">
                                        a<sup>-n</sup> = <span class="fraction"><span class="fraction-top">1</span><br><span class="fraction-bottom">a<sup>n</sup></span></span>
                                    </div>
                                    <div class="space-y-2">
                                        <div class="math-display bg-white p-2 rounded">2<sup>-3</sup> = <span class="fraction"><span class="fraction-top">1</span><br><span class="fraction-bottom">2<sup>3</sup></span></span> = <span class="fraction"><span class="fraction-top">1</span><br><span class="fraction-bottom">8</span></span></div>
                                        <div class="math-display bg-white p-2 rounded">5<sup>-2</sup> = <span class="fraction"><span class="fraction-top">1</span><br><span class="fraction-bottom">5<sup>2</sup></span></span> = <span class="fraction"><span class="fraction-top">1</span><br><span class="fraction-bottom">25</span></span></div>
                                        <div class="math-display bg-white p-2 rounded">10<sup>-1</sup> = <span class="fraction"><span class="fraction-top">1</span><br><span class="fraction-bottom">10</span></span> = 0,1</div>
                                    </div>
                                </div>
                                
                                <div class="bg-orange-50 p-4 rounded-lg">
                                    <h4 class="font-bold text-orange-800 mb-2">‚ö° Tips Cepat:</h4>
                                    <div class="text-sm">
                                        <div>‚Ä¢ Pangkat negatif = "balik" dan jadikan positif</div>
                                        <div>‚Ä¢ <span class="math-display">(<span class="fraction"><span class="fraction-top">1</span><br><span class="fraction-bottom">a</span></span>)<sup>-n</sup> = a<sup>n</sup></span></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Latihan -->
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold text-gray-800">‚úèÔ∏è Latihan Soal</h3>
                                    <button onclick="generateNegatifProblems()" class="bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700 transition">üîÑ Soal Baru</button>
                                </div>
                                <div id="negatif-problems" class="space-y-4">
                                    <!-- Problems will be generated here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 4: Sifat Perkalian -->
                    <div id="content-sifat-kali" class="p-6 hidden">
                        <div class="grid lg:grid-cols-2 gap-6">
                            <!-- Materi -->
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 mb-4">‚úñÔ∏è Sifat Perkalian Bilangan Berpangkat</h2>
                                <div class="bg-purple-50 p-4 rounded-lg mb-4">
                                    <div class="space-y-4">
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-purple-800">1. Perkalian dengan basis sama:</strong><br>
                                            <div class="math-display text-center mt-2">a<sup>m</sup> √ó a<sup>n</sup> = a<sup>m+n</sup></div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: 2<sup>3</sup> √ó 2<sup>4</sup> = 2<sup>7</sup></div>
                                        </div>
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-purple-800">2. Perkalian dengan pangkat sama:</strong><br>
                                            <div class="math-display text-center mt-2">a<sup>n</sup> √ó b<sup>n</sup> = (a √ó b)<sup>n</sup></div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: 2<sup>3</sup> √ó 5<sup>3</sup> = (2 √ó 5)<sup>3</sup> = 10<sup>3</sup></div>
                                        </div>
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-purple-800">3. Perkalian bilangan dengan variabel:</strong><br>
                                            <div class="math-display text-center mt-2">3 √ó a<sup>n</sup> = 3a<sup>n</sup></div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: 4 √ó x<sup>2</sup> = 4x<sup>2</sup></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-orange-50 p-4 rounded-lg">
                                    <h4 class="font-bold text-orange-800 mb-2">‚ö° Tips Cepat:</h4>
                                    <div class="text-sm">
                                        <div>‚Ä¢ Basis sama ‚Üí tambahkan pangkat</div>
                                        <div>‚Ä¢ Pangkat sama ‚Üí kalikan basis</div>
                                        <div>‚Ä¢ Ingat urutan operasi matematika</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Latihan -->
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold text-gray-800">‚úèÔ∏è Latihan Soal</h3>
                                    <button onclick="generateSifatKaliProblems()" class="bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700 transition">üîÑ Soal Baru</button>
                                </div>
                                <div id="sifat-kali-problems" class="space-y-4">
                                    <!-- Problems will be generated here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 5: Sifat Pembagian -->
                    <div id="content-sifat-bagi" class="p-6 hidden">
                        <div class="grid lg:grid-cols-2 gap-6">
                            <!-- Materi -->
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 mb-4">‚ûó Sifat Pembagian Bilangan Berpangkat</h2>
                                <div class="bg-teal-50 p-4 rounded-lg mb-4">
                                    <div class="space-y-4">
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-teal-800">1. Pembagian dengan basis sama:</strong><br>
                                            <div class="math-display text-center mt-2">a<sup>m</sup> √∑ a<sup>n</sup> = a<sup>m-n</sup></div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: 3<sup>5</sup> √∑ 3<sup>2</sup> = 3<sup>3</sup></div>
                                        </div>
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-teal-800">2. Pembagian dengan pangkat sama:</strong><br>
                                            <div class="math-display text-center mt-2"><span class="fraction"><span class="fraction-top">a<sup>n</sup></span><br><span class="fraction-bottom">b<sup>n</sup></span></span> = (<span class="fraction"><span class="fraction-top">a</span><br><span class="fraction-bottom">b</span></span>)<sup>n</sup></div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: <span class="fraction"><span class="fraction-top">6<sup>3</sup></span><br><span class="fraction-bottom">2<sup>3</sup></span></span> = 3<sup>3</sup></div>
                                        </div>
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-teal-800">3. Pembagian menghasilkan pangkat negatif:</strong><br>
                                            <div class="math-display text-center mt-2">a<sup>2</sup> √∑ a<sup>5</sup> = a<sup>-3</sup> = <span class="fraction"><span class="fraction-top">1</span><br><span class="fraction-bottom">a<sup>3</sup></span></span></div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: 2<sup>2</sup> √∑ 2<sup>5</sup> = 2<sup>-3</sup></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-red-50 p-4 rounded-lg">
                                    <h4 class="font-bold text-red-800 mb-2">‚ö†Ô∏è Perhatikan:</h4>
                                    <div class="text-sm">
                                        <div>‚Ä¢ Basis sama ‚Üí kurangkan pangkat</div>
                                        <div>‚Ä¢ Jika pangkat pembagi > pangkat yang dibagi ‚Üí hasil negatif</div>
                                        <div>‚Ä¢ Pangkat negatif = pecahan</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Latihan -->
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold text-gray-800">‚úèÔ∏è Latihan Soal</h3>
                                    <button onclick="generateSifatBagiProblems()" class="bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700 transition">üîÑ Soal Baru</button>
                                </div>
                                <div id="sifat-bagi-problems" class="space-y-4">
                                    <!-- Problems will be generated here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 6: Pangkat dari Pangkat -->
                    <div id="content-pangkat-pangkat" class="p-6 hidden">
                        <div class="grid lg:grid-cols-2 gap-6">
                            <!-- Materi -->
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 mb-4">üîÑ Pangkat dari Pangkat</h2>
                                <div class="bg-indigo-50 p-4 rounded-lg mb-4">
                                    <div class="space-y-4">
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-indigo-800">1. Pangkat dari Pangkat:</strong><br>
                                            <div class="math-display text-center mt-2">(a<sup>m</sup>)<sup>n</sup> = a<sup>m√ón</sup></div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: (2<sup>3</sup>)<sup>4</sup> = 2<sup>12</sup></div>
                                        </div>
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-indigo-800">2. Pangkat dari Perkalian:</strong><br>
                                            <div class="math-display text-center mt-2">(a √ó b)<sup>n</sup> = a<sup>n</sup> √ó b<sup>n</sup></div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: (3 √ó 4)<sup>2</sup> = 3<sup>2</sup> √ó 4<sup>2</sup></div>
                                        </div>
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-indigo-800">3. Pangkat dari Pembagian:</strong><br>
                                            <div class="math-display text-center mt-2">(<span class="fraction"><span class="fraction-top">a</span><br><span class="fraction-bottom">b</span></span>)<sup>n</sup> = <span class="fraction"><span class="fraction-top">a<sup>n</sup></span><br><span class="fraction-bottom">b<sup>n</sup></span></span></div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: (<span class="fraction"><span class="fraction-top">2</span><br><span class="fraction-bottom">3</span></span>)<sup>3</sup> = <span class="fraction"><span class="fraction-top">2<sup>3</sup></span><br><span class="fraction-bottom">3<sup>3</sup></span></span></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-green-50 p-4 rounded-lg">
                                    <h4 class="font-bold text-green-800 mb-2">üí° Strategi:</h4>
                                    <div class="text-sm">
                                        <div>‚Ä¢ Pangkat luar √ó pangkat dalam</div>
                                        <div>‚Ä¢ Distribusikan pangkat ke setiap faktor</div>
                                        <div>‚Ä¢ Hitung dari dalam ke luar</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Latihan -->
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold text-gray-800">‚úèÔ∏è Latihan Soal</h3>
                                    <button onclick="generatePangkatPangkatProblems()" class="bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700 transition">üîÑ Soal Baru</button>
                                </div>
                                <div id="pangkat-pangkat-problems" class="space-y-4">
                                    <!-- Problems will be generated here -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tab 7: Sifat Khusus -->
                    <div id="content-sifat-khusus" class="p-6 hidden">
                        <div class="grid lg:grid-cols-2 gap-6">
                            <!-- Materi -->
                            <div>
                                <h2 class="text-2xl font-bold text-gray-800 mb-4">‚≠ê Sifat Khusus Bilangan Berpangkat</h2>
                                <div class="bg-yellow-50 p-4 rounded-lg mb-4">
                                    <div class="space-y-4">
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-yellow-800">1. Pangkat Nol:</strong><br>
                                            <div class="math-display text-center mt-2">a<sup>0</sup> = 1 (a ‚â† 0)</div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: 5<sup>0</sup> = 1, 100<sup>0</sup> = 1</div>
                                        </div>
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-yellow-800">2. Pangkat Satu:</strong><br>
                                            <div class="math-display text-center mt-2">a<sup>1</sup> = a</div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: 7<sup>1</sup> = 7, x<sup>1</sup> = x</div>
                                        </div>
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-yellow-800">3. Pangkat Pecahan (Akar):</strong><br>
                                            <div class="math-display text-center mt-2">a<sup>1/n</sup> = <sup>n</sup>‚àöa</div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: 8<sup>1/3</sup> = ¬≥‚àö8 = 2</div>
                                        </div>
                                        <div class="bg-white p-3 rounded">
                                            <strong class="text-yellow-800">4. Basis Negatif:</strong><br>
                                            <div class="math-display text-center mt-2">(-a)<sup>n</sup> = a<sup>n</sup> (jika n genap)<br>(-a)<sup>n</sup> = -a<sup>n</sup> (jika n ganjil)</div>
                                            <div class="text-sm text-gray-600 mt-1">Contoh: (-2)<sup>4</sup> = 16, (-2)<sup>3</sup> = -8</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-pink-50 p-4 rounded-lg">
                                    <h4 class="font-bold text-pink-800 mb-2">üéØ Ingat Selalu:</h4>
                                    <div class="text-sm">
                                        <div>‚Ä¢ Setiap bilangan pangkat 0 = 1</div>
                                        <div>‚Ä¢ Pangkat genap dari negatif = positif</div>
                                        <div>‚Ä¢ Pangkat ganjil dari negatif = negatif</div>
                                        <div>‚Ä¢ Pangkat pecahan = akar</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Latihan -->
                            <div>
                                <div class="flex justify-between items-center mb-4">
                                    <h3 class="text-xl font-bold text-gray-800">‚úèÔ∏è Latihan Soal</h3>
                                    <button onclick="generateSifatKhususProblems()" class="bg-indigo-600 text-white px-3 py-1 rounded text-sm hover:bg-indigo-700 transition">üîÑ Soal Baru</button>
                                </div>
                                <div id="sifat-khusus-problems" class="space-y-4">
                                    <!-- Problems will be generated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let activeInput = null;
        let activeInputDisplay = null;

        // Tab Management
        function showTab(tabName) {
            // Hide all content
            const tabs = ['definisi', 'positif', 'negatif', 'sifat-kali', 'sifat-bagi', 'pangkat-pangkat', 'sifat-khusus'];
            tabs.forEach(tab => {
                document.getElementById('content-' + tab).classList.add('hidden');
                document.getElementById('tab-' + tab).classList.remove('text-indigo-600', 'border-indigo-600');
                document.getElementById('tab-' + tab).classList.add('text-gray-500');
            });
            
            // Show selected content and activate tab
            document.getElementById('content-' + tabName).classList.remove('hidden');
            document.getElementById('tab-' + tabName).classList.remove('text-gray-500');
            document.getElementById('tab-' + tabName).classList.add('text-indigo-600', 'border-indigo-600');
            
            // Generate problems for the selected tab
            switch(tabName) {
                case 'definisi':
                    generateDefinisiProblems();
                    break;
                case 'positif':
                    generatePositifProblems();
                    break;
                case 'negatif':
                    generateNegatifProblems();
                    break;
                case 'sifat-kali':
                    generateSifatKaliProblems();
                    break;
                case 'sifat-bagi':
                    generateSifatBagiProblems();
                    break;
                case 'pangkat-pangkat':
                    generatePangkatPangkatProblems();
                    break;
                case 'sifat-khusus':
                    generateSifatKhususProblems();
                    break;
            }
        }

        // Virtual Keyboard Functions for Individual Inputs
        function insertToInput(inputId, symbol) {
            const input = document.getElementById(inputId);
            if (input) {
                const cursorPos = input.selectionStart || input.value.length;
                const value = input.value;
                input.value = value.slice(0, cursorPos) + symbol + value.slice(cursorPos);
                input.focus();
                input.setSelectionRange(cursorPos + symbol.length, cursorPos + symbol.length);
                formatMathInput(input);
            }
        }

        function formatMathInput(input) {
            const originalValue = input.value;
            const cursorPos = input.selectionStart;
            
            // Convert mathematical notation to display format
            let formattedValue = originalValue;
            
            // Handle fractions first: a/b -> proper fraction display
            formattedValue = formattedValue.replace(/([^\/\s]+)\/([^\/\s]+)/g, (match, numerator, denominator) => {
                // Handle powers in numerator and denominator
                let formattedNum = numerator.replace(/\^(\([^)]+\))/g, (m, g) => convertToSuperscript(g.slice(1, -1)));
                formattedNum = formattedNum.replace(/\^([a-zA-Z0-9+-]+)/g, (m, g) => convertToSuperscript(g));
                
                let formattedDen = denominator.replace(/\^(\([^)]+\))/g, (m, g) => convertToSuperscript(g.slice(1, -1)));
                formattedDen = formattedDen.replace(/\^([a-zA-Z0-9+-]+)/g, (m, g) => convertToSuperscript(g));
                
                return `${formattedNum}/${formattedDen}`;
            });
            
            // Handle powers: 2^3 -> 2¬≥, 2^(3+4) -> 2¬≥‚Å∫‚Å¥, 2^x -> 2À£
            formattedValue = formattedValue.replace(/\^(\([^)]+\))/g, (match, group) => {
                // Remove parentheses and convert each character
                const content = group.slice(1, -1);
                return convertToSuperscript(content);
            });
            
            formattedValue = formattedValue.replace(/\^([a-zA-Z0-9+-]+)/g, (match, group) => {
                return convertToSuperscript(group);
            });
            
            // Handle subscripts if needed: H_2 -> H‚ÇÇ
            formattedValue = formattedValue.replace(/_([a-zA-Z0-9]+)/g, (match, group) => {
                return convertToSubscript(group);
            });
            
            // Update input if changed
            if (formattedValue !== originalValue) {
                input.value = formattedValue;
                // Try to maintain cursor position
                const newCursorPos = Math.min(cursorPos, formattedValue.length);
                input.setSelectionRange(newCursorPos, newCursorPos);
            }
        }

        function convertToSuperscript(text) {
            const superscriptMap = {
                '0': '‚Å∞', '1': '¬π', '2': '¬≤', '3': '¬≥', '4': '‚Å¥',
                '5': '‚Åµ', '6': '‚Å∂', '7': '‚Å∑', '8': '‚Å∏', '9': '‚Åπ',
                '+': '‚Å∫', '-': '‚Åª', '=': '‚Åº', '(': '‚ÅΩ', ')': '‚Åæ',
                'a': '·µÉ', 'b': '·µá', 'c': '·∂ú', 'd': '·µà', 'e': '·µâ',
                'f': '·∂†', 'g': '·µç', 'h': ' ∞', 'i': '‚Å±', 'j': ' ≤',
                'k': '·µè', 'l': 'À°', 'm': '·µê', 'n': '‚Åø', 'o': '·µí',
                'p': '·µñ', 'q': '·µ†', 'r': ' ≥', 's': 'À¢', 't': '·µó',
                'u': '·µò', 'v': '·µõ', 'w': ' ∑', 'x': 'À£', 'y': ' ∏', 'z': '·∂ª'
            };
            
            return text.split('').map(char => superscriptMap[char] || char).join('');
        }

        function convertToSubscript(text) {
            const subscriptMap = {
                '0': '‚ÇÄ', '1': '‚ÇÅ', '2': '‚ÇÇ', '3': '‚ÇÉ', '4': '‚ÇÑ',
                '5': '‚ÇÖ', '6': '‚ÇÜ', '7': '‚Çá', '8': '‚Çà', '9': '‚Çâ',
                '+': '‚Çä', '-': '‚Çã', '=': '‚Çå', '(': '‚Çç', ')': '‚Çé',
                'a': '‚Çê', 'e': '‚Çë', 'h': '‚Çï', 'i': '·µ¢', 'j': '‚±º',
                'k': '‚Çñ', 'l': '‚Çó', 'm': '‚Çò', 'n': '‚Çô', 'o': '‚Çí',
                'p': '‚Çö', 'r': '·µ£', 's': '‚Çõ', 't': '‚Çú', 'u': '·µ§',
                'v': '·µ•', 'x': '‚Çì'
            };
            
            return text.split('').map(char => subscriptMap[char] || char).join('');
        }

        function clearInput(inputId) {
            const input = document.getElementById(inputId);
            if (input) {
                input.value = '';
                input.focus();
            }
        }

        function backspaceInput(inputId) {
            const input = document.getElementById(inputId);
            if (input) {
                const cursorPos = input.selectionStart || input.value.length;
                if (cursorPos > 0) {
                    const value = input.value;
                    input.value = value.slice(0, cursorPos - 1) + value.slice(cursorPos);
                    input.focus();
                    input.setSelectionRange(cursorPos - 1, cursorPos - 1);
                }
            }
        }

        function setInputValue(inputId, value) {
            const input = document.getElementById(inputId);
            if (input) {
                input.value = value;
                input.focus();
                input.setSelectionRange(value.length, value.length);
                formatMathInput(input);
            }
        }

        // Add event listener for real-time formatting
        function addMathFormatting(inputId) {
            const input = document.getElementById(inputId);
            if (input) {
                input.addEventListener('input', function() {
                    formatMathInput(this);
                });
                
                input.addEventListener('keyup', function() {
                    formatMathInput(this);
                });
            }
        }

        // Problem Generators for Each Tab
        function generateDefinisiProblems() {
            const container = document.getElementById('definisi-problems');
            container.innerHTML = '';
            
            const problemSets = [
                [
                    { question: 'Tuliskan dalam bentuk perkalian berulang: 3‚Å¥', answer: '3 √ó 3 √ó 3 √ó 3', type: 'expand' },
                    { question: 'Hitunglah: 2‚Åµ', answer: '32', type: 'calculate' },
                    { question: 'Tuliskan dalam bentuk pangkat: 5 √ó 5 √ó 5', answer: '5¬≥', type: 'simplify' },
                    { question: 'Hitunglah: 4¬≥', answer: '64', type: 'calculate' },
                    { question: 'Berapa nilai dari 7¬π?', answer: '7', type: 'basic' }
                ],
                [
                    { question: 'Tuliskan dalam bentuk perkalian berulang: 2‚Å∂', answer: '2 √ó 2 √ó 2 √ó 2 √ó 2 √ó 2', type: 'expand' },
                    { question: 'Hitunglah: 3‚Å¥', answer: '81', type: 'calculate' },
                    { question: 'Tuliskan dalam bentuk pangkat: 4 √ó 4 √ó 4 √ó 4', answer: '4‚Å¥', type: 'simplify' },
                    { question: 'Hitunglah: 5¬≤', answer: '25', type: 'calculate' },
                    { question: 'Berapa nilai dari 9¬π?', answer: '9', type: 'basic' }
                ],
                [
                    { question: 'Tuliskan dalam bentuk perkalian berulang: 6¬≥', answer: '6 √ó 6 √ó 6', type: 'expand' },
                    { question: 'Hitunglah: 2‚Å¥', answer: '16', type: 'calculate' },
                    { question: 'Tuliskan dalam bentuk pangkat: 7 √ó 7', answer: '7¬≤', type: 'simplify' },
                    { question: 'Hitunglah: 3¬≥', answer: '27', type: 'calculate' },
                    { question: 'Berapa nilai dari 15¬π?', answer: '15', type: 'basic' }
                ]
            ];
            
            const randomSet = problemSets[Math.floor(Math.random() * problemSets.length)];
            randomSet.forEach((prob, index) => {
                const div = createProblemElement(prob, index + 1, 'definisi');
                container.appendChild(div);
            });
        }

        function generatePositifProblems() {
            const container = document.getElementById('positif-problems');
            container.innerHTML = '';
            
            const problemSets = [
                [
                    { question: 'Hitunglah: 3‚Å¥', answer: '81', type: 'calculate' },
                    { question: 'Hitunglah: (-2)¬≥', answer: '-8', type: 'negative-base' },
                    { question: 'Hitunglah: (-3)¬≤', answer: '9', type: 'negative-base' },
                    { question: 'Berapa nilai dari 10¬≥?', answer: '1000', type: 'calculate' },
                    { question: 'Hitunglah: 6¬≤', answer: '36', type: 'calculate' }
                ],
                [
                    { question: 'Hitunglah: 2‚Å∂', answer: '64', type: 'calculate' },
                    { question: 'Hitunglah: (-4)¬≤', answer: '16', type: 'negative-base' },
                    { question: 'Hitunglah: (-1)‚Åµ', answer: '-1', type: 'negative-base' },
                    { question: 'Berapa nilai dari 5‚Å¥?', answer: '625', type: 'calculate' },
                    { question: 'Hitunglah: 8¬≤', answer: '64', type: 'calculate' }
                ],
                [
                    { question: 'Hitunglah: 4¬≥', answer: '64', type: 'calculate' },
                    { question: 'Hitunglah: (-5)¬≤', answer: '25', type: 'negative-base' },
                    { question: 'Hitunglah: (-2)‚Å¥', answer: '16', type: 'negative-base' },
                    { question: 'Berapa nilai dari 7¬≤?', answer: '49', type: 'calculate' },
                    { question: 'Hitunglah: 9¬≤', answer: '81', type: 'calculate' }
                ]
            ];
            
            const randomSet = problemSets[Math.floor(Math.random() * problemSets.length)];
            randomSet.forEach((prob, index) => {
                const div = createProblemElement(prob, index + 1, 'positif');
                container.appendChild(div);
            });
        }

        function generateNegatifProblems() {
            const container = document.getElementById('negatif-problems');
            container.innerHTML = '';
            
            const problemSets = [
                [
                    { question: 'Hitunglah: 2‚Åª¬≥', answer: '1/8', type: 'negative-power' },
                    { question: 'Ubah ke bentuk pecahan: 5‚Åª¬≤', answer: '1/25', type: 'fraction' },
                    { question: 'Hitunglah: 10‚Åª¬π', answer: '0.1', type: 'decimal' },
                    { question: 'Sederhanakan: (1/3)‚Åª¬≤', answer: '9', type: 'fraction-negative' },
                    { question: 'Hitunglah: 4‚Åª¬≤', answer: '1/16', type: 'negative-power' }
                ],
                [
                    { question: 'Hitunglah: 3‚Åª¬≤', answer: '1/9', type: 'negative-power' },
                    { question: 'Ubah ke bentuk pecahan: 2‚Åª‚Å¥', answer: '1/16', type: 'fraction' },
                    { question: 'Hitunglah: 10‚Åª¬≤', answer: '0.01', type: 'decimal' },
                    { question: 'Sederhanakan: (1/2)‚Åª¬≥', answer: '8', type: 'fraction-negative' },
                    { question: 'Hitunglah: 6‚Åª¬π', answer: '1/6', type: 'negative-power' }
                ],
                [
                    { question: 'Hitunglah: 5‚Åª¬π', answer: '1/5', type: 'negative-power' },
                    { question: 'Ubah ke bentuk pecahan: 3‚Åª¬≥', answer: '1/27', type: 'fraction' },
                    { question: 'Hitunglah: 10‚Åª¬≥', answer: '0.001', type: 'decimal' },
                    { question: 'Sederhanakan: (1/4)‚Åª¬≤', answer: '16', type: 'fraction-negative' },
                    { question: 'Hitunglah: 7‚Åª¬π', answer: '1/7', type: 'negative-power' }
                ]
            ];
            
            const randomSet = problemSets[Math.floor(Math.random() * problemSets.length)];
            randomSet.forEach((prob, index) => {
                const div = createProblemElement(prob, index + 1, 'negatif');
                container.appendChild(div);
            });
        }

        function generateSifatKaliProblems() {
            const container = document.getElementById('sifat-kali-problems');
            container.innerHTML = '';
            
            const problemSets = [
                [
                    { question: 'Sederhanakan: 2¬≥ √ó 2‚Å¥', answer: '2‚Å∑', type: 'same-base' },
                    { question: 'Sederhanakan: 3¬≤ √ó 4¬≤', answer: '12¬≤', type: 'same-power' },
                    { question: 'Hitunglah: a‚Åµ √ó a¬≥ (dalam bentuk pangkat)', answer: 'a‚Å∏', type: 'variable' },
                    { question: 'Sederhanakan: 5¬π √ó 5‚Å∂', answer: '5‚Å∑', type: 'same-base' },
                    { question: 'Sederhanakan: 2¬≥ √ó 3¬≥', answer: '6¬≥', type: 'same-power' }
                ],
                [
                    { question: 'Sederhanakan: 4¬≤ √ó 4¬≥', answer: '4‚Åµ', type: 'same-base' },
                    { question: 'Sederhanakan: 5¬≤ √ó 2¬≤', answer: '10¬≤', type: 'same-power' },
                    { question: 'Hitunglah: x‚Å¥ √ó x¬≤ (dalam bentuk pangkat)', answer: 'x‚Å∂', type: 'variable' },
                    { question: 'Sederhanakan: 3‚Åµ √ó 3¬≤', answer: '3‚Å∑', type: 'same-base' },
                    { question: 'Sederhanakan: 6¬≤ √ó 2¬≤', answer: '12¬≤', type: 'same-power' }
                ],
                [
                    { question: 'Sederhanakan: 7¬≥ √ó 7¬π', answer: '7‚Å¥', type: 'same-base' },
                    { question: 'Sederhanakan: 4¬≥ √ó 2¬≥', answer: '8¬≥', type: 'same-power' },
                    { question: 'Hitunglah: m¬≤ √ó m‚Åµ (dalam bentuk pangkat)', answer: 'm‚Å∑', type: 'variable' },
                    { question: 'Sederhanakan: 2‚Å∂ √ó 2¬π', answer: '2‚Å∑', type: 'same-base' },
                    { question: 'Sederhanakan: 3‚Å¥ √ó 2‚Å¥', answer: '6‚Å¥', type: 'same-power' }
                ]
            ];
            
            const randomSet = problemSets[Math.floor(Math.random() * problemSets.length)];
            randomSet.forEach((prob, index) => {
                const div = createProblemElement(prob, index + 1, 'sifat-kali');
                container.appendChild(div);
            });
        }

        function generateSifatBagiProblems() {
            const container = document.getElementById('sifat-bagi-problems');
            container.innerHTML = '';
            
            const problemSets = [
                [
                    { question: 'Sederhanakan: 5‚Å∂ √∑ 5¬≤', answer: '5‚Å¥', type: 'same-base' },
                    { question: 'Sederhanakan: 8¬≥ √∑ 2¬≥', answer: '4¬≥', type: 'same-power' },
                    { question: 'Hitunglah: x‚Å∑ √∑ x¬≥ (dalam bentuk pangkat)', answer: 'x‚Å¥', type: 'variable' },
                    { question: 'Sederhanakan: 3‚Åµ √∑ 3‚Å∑', answer: '3‚Åª¬≤', type: 'negative-result' },
                    { question: 'Sederhanakan: 12‚Å¥ √∑ 3‚Å¥', answer: '4‚Å¥', type: 'same-power' }
                ],
                [
                    { question: 'Sederhanakan: 7‚Å∏ √∑ 7¬≥', answer: '7‚Åµ', type: 'same-base' },
                    { question: 'Sederhanakan: 10‚Åµ √∑ 2‚Åµ', answer: '5‚Åµ', type: 'same-power' },
                    { question: 'Hitunglah: a‚Åπ √∑ a‚Å¥ (dalam bentuk pangkat)', answer: 'a‚Åµ', type: 'variable' },
                    { question: 'Sederhanakan: 2¬≥ √∑ 2‚Å∂', answer: '2‚Åª¬≥', type: 'negative-result' },
                    { question: 'Sederhanakan: 18¬≤ √∑ 6¬≤', answer: '3¬≤', type: 'same-power' }
                ],
                [
                    { question: 'Sederhanakan: 4‚Å∑ √∑ 4¬≤', answer: '4‚Åµ', type: 'same-base' },
                    { question: 'Sederhanakan: 15¬≥ √∑ 3¬≥', answer: '5¬≥', type: 'same-power' },
                    { question: 'Hitunglah: y‚Å∂ √∑ y¬≤ (dalam bentuk pangkat)', answer: 'y‚Å¥', type: 'variable' },
                    { question: 'Sederhanakan: 6¬≤ √∑ 6‚Åµ', answer: '6‚Åª¬≥', type: 'negative-result' },
                    { question: 'Sederhanakan: 20‚Å¥ √∑ 4‚Å¥', answer: '5‚Å¥', type: 'same-power' }
                ]
            ];
            
            const randomSet = problemSets[Math.floor(Math.random() * problemSets.length)];
            randomSet.forEach((prob, index) => {
                const div = createProblemElement(prob, index + 1, 'sifat-bagi');
                container.appendChild(div);
            });
        }

        function generatePangkatPangkatProblems() {
            const container = document.getElementById('pangkat-pangkat-problems');
            container.innerHTML = '';
            
            const problemSets = [
                [
                    { question: 'Sederhanakan: (2¬≥)‚Å¥', answer: '2¬π¬≤', type: 'power-of-power' },
                    { question: 'Sederhanakan: (3 √ó 4)¬≤', answer: '3¬≤ √ó 4¬≤', type: 'power-of-product' },
                    { question: 'Sederhanakan: (5/2)¬≥', answer: '5¬≥/2¬≥', type: 'power-of-quotient' },
                    { question: 'Sederhanakan: (a¬≤)‚Åµ', answer: 'a¬π‚Å∞', type: 'variable-power' },
                    { question: 'Sederhanakan: (x¬≥)¬≤', answer: 'x‚Å∂', type: 'variable-power' }
                ],
                [
                    { question: 'Sederhanakan: (4¬≤)¬≥', answer: '4‚Å∂', type: 'power-of-power' },
                    { question: 'Sederhanakan: (2 √ó 5)¬≥', answer: '2¬≥ √ó 5¬≥', type: 'power-of-product' },
                    { question: 'Sederhanakan: (7/3)¬≤', answer: '7¬≤/3¬≤', type: 'power-of-quotient' },
                    { question: 'Sederhanakan: (b¬≥)‚Å¥', answer: 'b¬π¬≤', type: 'variable-power' },
                    { question: 'Sederhanakan: (y¬≤)¬≥', answer: 'y‚Å∂', type: 'variable-power' }
                ],
                [
                    { question: 'Sederhanakan: (3‚Å¥)¬≤', answer: '3‚Å∏', type: 'power-of-power' },
                    { question: 'Sederhanakan: (6 √ó 2)¬≤', answer: '6¬≤ √ó 2¬≤', type: 'power-of-product' },
                    { question: 'Sederhanakan: (4/5)¬≥', answer: '4¬≥/5¬≥', type: 'power-of-quotient' },
                    { question: 'Sederhanakan: (c‚Å¥)¬≥', answer: 'c¬π¬≤', type: 'variable-power' },
                    { question: 'Sederhanakan: (z‚Åµ)¬≤', answer: 'z¬π‚Å∞', type: 'variable-power' }
                ]
            ];
            
            const randomSet = problemSets[Math.floor(Math.random() * problemSets.length)];
            randomSet.forEach((prob, index) => {
                const div = createProblemElement(prob, index + 1, 'pangkat-pangkat');
                container.appendChild(div);
            });
        }

        function generateSifatKhususProblems() {
            const container = document.getElementById('sifat-khusus-problems');
            container.innerHTML = '';
            
            const problemSets = [
                [
                    { question: 'Berapa nilai dari 7‚Å∞?', answer: '1', type: 'zero-power' },
                    { question: 'Berapa nilai dari 15¬π?', answer: '15', type: 'one-power' },
                    { question: 'Hitunglah: 8^(1/3)', answer: '2', type: 'fractional' },
                    { question: 'Hitunglah: (-3)‚Å¥', answer: '81', type: 'negative-even' },
                    { question: 'Hitunglah: (-2)‚Åµ', answer: '-32', type: 'negative-odd' }
                ],
                [
                    { question: 'Berapa nilai dari 100‚Å∞?', answer: '1', type: 'zero-power' },
                    { question: 'Berapa nilai dari 25¬π?', answer: '25', type: 'one-power' },
                    { question: 'Hitunglah: 27^(1/3)', answer: '3', type: 'fractional' },
                    { question: 'Hitunglah: (-4)¬≤', answer: '16', type: 'negative-even' },
                    { question: 'Hitunglah: (-1)‚Å∑', answer: '-1', type: 'negative-odd' }
                ],
                [
                    { question: 'Berapa nilai dari 50‚Å∞?', answer: '1', type: 'zero-power' },
                    { question: 'Berapa nilai dari 99¬π?', answer: '99', type: 'one-power' },
                    { question: 'Hitunglah: 16^(1/4)', answer: '2', type: 'fractional' },
                    { question: 'Hitunglah: (-5)¬≤', answer: '25', type: 'negative-even' },
                    { question: 'Hitunglah: (-3)¬≥', answer: '-27', type: 'negative-odd' }
                ]
            ];
            
            const randomSet = problemSets[Math.floor(Math.random() * problemSets.length)];
            randomSet.forEach((prob, index) => {
                const div = createProblemElement(prob, index + 1, 'sifat-khusus');
                container.appendChild(div);
            });
        }

        function createProblemElement(problem, number, category) {
            const div = document.createElement('div');
            div.className = 'bg-white p-4 rounded-lg border border-gray-200 shadow-sm';
            
            const inputId = `${category}-answer-${number}`;
            
            div.innerHTML = `
                <div class="flex justify-between items-start mb-3">
                    <h4 class="font-bold text-gray-800">Soal ${number}</h4>
                    <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">${problem.type}</span>
                </div>
                <div class="math-display text-lg mb-3">${problem.question}</div>
                <div class="space-y-3">
                    <input type="text" 
                           placeholder="Ketik jawaban di sini..." 
                           class="w-full p-3 border-2 border-gray-300 rounded-lg math-input focus:border-blue-500 transition-colors" 
                           id="${inputId}"
                           oninput="formatMathInput(this)"
                           onkeyup="formatMathInput(this)">
                    
                    <!-- Virtual Keyboard for this problem -->
                    <div class="bg-gray-50 p-3 rounded-lg border">
                        <div class="text-xs text-gray-600 mb-2 font-semibold">‚å®Ô∏è Keyboard Virtual:</div>
                        
                        <!-- Numbers -->
                        <div class="grid grid-cols-5 gap-1 mb-2">
                            <button onclick="insertToInput('${inputId}', '1')" class="keyboard-btn bg-blue-100 hover:bg-blue-200 p-2 rounded text-sm font-bold">1</button>
                            <button onclick="insertToInput('${inputId}', '2')" class="keyboard-btn bg-blue-100 hover:bg-blue-200 p-2 rounded text-sm font-bold">2</button>
                            <button onclick="insertToInput('${inputId}', '3')" class="keyboard-btn bg-blue-100 hover:bg-blue-200 p-2 rounded text-sm font-bold">3</button>
                            <button onclick="insertToInput('${inputId}', '4')" class="keyboard-btn bg-blue-100 hover:bg-blue-200 p-2 rounded text-sm font-bold">4</button>
                            <button onclick="insertToInput('${inputId}', '5')" class="keyboard-btn bg-blue-100 hover:bg-blue-200 p-2 rounded text-sm font-bold">5</button>
                        </div>
                        <div class="grid grid-cols-5 gap-1 mb-2">
                            <button onclick="insertToInput('${inputId}', '6')" class="keyboard-btn bg-blue-100 hover:bg-blue-200 p-2 rounded text-sm font-bold">6</button>
                            <button onclick="insertToInput('${inputId}', '7')" class="keyboard-btn bg-blue-100 hover:bg-blue-200 p-2 rounded text-sm font-bold">7</button>
                            <button onclick="insertToInput('${inputId}', '8')" class="keyboard-btn bg-blue-100 hover:bg-blue-200 p-2 rounded text-sm font-bold">8</button>
                            <button onclick="insertToInput('${inputId}', '9')" class="keyboard-btn bg-blue-100 hover:bg-blue-200 p-2 rounded text-sm font-bold">9</button>
                            <button onclick="insertToInput('${inputId}', '0')" class="keyboard-btn bg-blue-100 hover:bg-blue-200 p-2 rounded text-sm font-bold">0</button>
                        </div>

                        <!-- Operations -->
                        <div class="grid grid-cols-4 gap-1 mb-2">
                            <button onclick="insertToInput('${inputId}', '+')" class="keyboard-btn bg-green-100 hover:bg-green-200 p-2 rounded text-sm font-bold">+</button>
                            <button onclick="insertToInput('${inputId}', '-')" class="keyboard-btn bg-green-100 hover:bg-green-200 p-2 rounded text-sm font-bold">‚àí</button>
                            <button onclick="insertToInput('${inputId}', '√ó')" class="keyboard-btn bg-green-100 hover:bg-green-200 p-2 rounded text-sm font-bold">√ó</button>
                            <button onclick="insertToInput('${inputId}', '√∑')" class="keyboard-btn bg-green-100 hover:bg-green-200 p-2 rounded text-sm font-bold">√∑</button>
                        </div>

                        <!-- Special Math Symbols -->
                        <div class="grid grid-cols-4 gap-1 mb-2">
                            <button onclick="insertToInput('${inputId}', '^')" class="keyboard-btn bg-purple-100 hover:bg-purple-200 p-2 rounded text-xs font-bold">x<sup>n</sup></button>
                            <button onclick="insertToInput('${inputId}', '/')" class="keyboard-btn bg-purple-100 hover:bg-purple-200 p-2 rounded text-xs font-bold">a/b</button>
                            <button onclick="insertToInput('${inputId}', '=')" class="keyboard-btn bg-purple-100 hover:bg-purple-200 p-2 rounded text-sm font-bold">=</button>
                            <button onclick="insertToInput('${inputId}', '.')" class="keyboard-btn bg-purple-100 hover:bg-purple-200 p-2 rounded text-sm font-bold">.</button>
                        </div>

                        <!-- Variables and Brackets -->
                        <div class="grid grid-cols-6 gap-1 mb-2">
                            <button onclick="insertToInput('${inputId}', 'a')" class="keyboard-btn bg-yellow-100 hover:bg-yellow-200 p-2 rounded text-sm font-bold italic">a</button>
                            <button onclick="insertToInput('${inputId}', 'b')" class="keyboard-btn bg-yellow-100 hover:bg-yellow-200 p-2 rounded text-sm font-bold italic">b</button>
                            <button onclick="insertToInput('${inputId}', 'x')" class="keyboard-btn bg-yellow-100 hover:bg-yellow-200 p-2 rounded text-sm font-bold italic">x</button>
                            <button onclick="insertToInput('${inputId}', 'n')" class="keyboard-btn bg-yellow-100 hover:bg-yellow-200 p-2 rounded text-sm font-bold italic">n</button>
                            <button onclick="insertToInput('${inputId}', '(')" class="keyboard-btn bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm font-bold">(</button>
                            <button onclick="insertToInput('${inputId}', ')')" class="keyboard-btn bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm font-bold">)</button>
                        </div>

                        <!-- Control Buttons -->
                        <div class="grid grid-cols-3 gap-1 mb-2">
                            <button onclick="clearInput('${inputId}')" class="keyboard-btn bg-red-100 hover:bg-red-200 p-2 rounded text-xs font-bold">Clear</button>
                            <button onclick="backspaceInput('${inputId}')" class="keyboard-btn bg-orange-100 hover:bg-orange-200 p-2 rounded text-sm font-bold">‚å´</button>
                            <button onclick="insertToInput('${inputId}', ' ')" class="keyboard-btn bg-teal-100 hover:bg-teal-200 p-2 rounded text-xs font-bold">Space</button>
                        </div>

                        <!-- Quick Templates -->
                        <div class="border-t pt-2">
                            <div class="text-xs text-gray-600 mb-1 font-semibold">üöÄ Template Cepat:</div>
                            <div class="grid grid-cols-3 gap-1 mb-2">
                                <button onclick="setInputValue('${inputId}', '2^3')" class="bg-white hover:bg-gray-100 p-1 rounded border text-xs">2¬≥</button>
                                <button onclick="setInputValue('${inputId}', '5^-2')" class="bg-white hover:bg-gray-100 p-1 rounded border text-xs">5‚Åª¬≤</button>
                                <button onclick="setInputValue('${inputId}', '1/8')" class="bg-white hover:bg-gray-100 p-1 rounded border text-xs">1/8</button>
                                <button onclick="setInputValue('${inputId}', 'a^m')" class="bg-white hover:bg-gray-100 p-1 rounded border text-xs">a·µê</button>
                                <button onclick="setInputValue('${inputId}', '2^(3+4)')" class="bg-white hover:bg-gray-100 p-1 rounded border text-xs">2¬≥‚Å∫‚Å¥</button>
                                <button onclick="setInputValue('${inputId}', 'x^n')" class="bg-white hover:bg-gray-100 p-1 rounded border text-xs">x‚Åø</button>
                            </div>
                            <div class="text-xs text-gray-600 mb-1 font-semibold">üìê Template Pecahan:</div>
                            <div class="grid grid-cols-4 gap-1">
                                <button onclick="setInputValue('${inputId}', '1/2^3')" class="bg-white hover:bg-gray-100 p-1 rounded border text-xs">1/2¬≥</button>
                                <button onclick="setInputValue('${inputId}', '2^3/4^2')" class="bg-white hover:bg-gray-100 p-1 rounded border text-xs">2¬≥/4¬≤</button>
                                <button onclick="setInputValue('${inputId}', 'a^n/b^m')" class="bg-white hover:bg-gray-100 p-1 rounded border text-xs">a‚Åø/b·µê</button>
                                <button onclick="setInputValue('${inputId}', '1/x^2')" class="bg-white hover:bg-gray-100 p-1 rounded border text-xs">1/x¬≤</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex space-x-2">
                        <button onclick="checkAnswer('${inputId}', '${problem.answer}')" 
                                class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition flex-1">
                            ‚úì Periksa Jawaban
                        </button>
                        <button onclick="showHint('${inputId}', '${problem.answer}')" 
                                class="bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition">
                            üí° Petunjuk
                        </button>
                    </div>
                </div>
                <div id="result-${inputId}" class="mt-2 text-sm"></div>
            `;
            
            return div;
        }

        function checkAnswer(inputId, correctAnswer) {
            const userAnswer = document.getElementById(inputId).value.trim();
            const resultDiv = document.getElementById(`result-${inputId}`);
            const inputElement = document.getElementById(inputId);
            
            // Reset previous styling
            inputElement.classList.remove('bg-green-50', 'border-green-500', 'bg-red-50', 'border-red-500');
            
            // Convert user answer back to standard format for comparison
            const normalizedUserAnswer = normalizeAnswer(userAnswer);
            const normalizedCorrectAnswer = normalizeAnswer(correctAnswer);
            
            // Multiple correct answer formats
            const correctFormats = [correctAnswer, normalizedCorrectAnswer];
            
            // Handle fractions
            if (correctAnswer.includes('/')) {
                const parts = correctAnswer.split('/');
                correctFormats.push(`${parts[0]}/${parts[1]}`);
                
                // Add various fraction formats
                correctFormats.push(`${parts[0]} / ${parts[1]}`);
                correctFormats.push(`${parts[0]}√∑${parts[1]}`);
                
                // Calculate decimal equivalent
                const decimal = (parseFloat(parts[0]) / parseFloat(parts[1])).toString();
                correctFormats.push(decimal);
                if (decimal.includes('.')) {
                    correctFormats.push(parseFloat(decimal).toFixed(3));
                    correctFormats.push(parseFloat(decimal).toFixed(2));
                    correctFormats.push(parseFloat(decimal).toFixed(1));
                }
                
                // Check if user answer is equivalent fraction
                const userFractionValue = evaluateFraction(normalizedUserAnswer);
                const correctFractionValue = evaluateFraction(correctAnswer);
                if (userFractionValue !== null && correctFractionValue !== null) {
                    if (Math.abs(userFractionValue - correctFractionValue) < 0.0001) {
                        correctFormats.push(normalizedUserAnswer);
                    }
                }
            }
            
            // Handle powers with ^ notation
            if (correctAnswer.includes('^')) {
                correctFormats.push(correctAnswer.replace(/\^/g, ''));
            }
            
            // Handle negative powers
            if (correctAnswer.includes('-')) {
                correctFormats.push(correctAnswer.replace(/-/g, '‚àí'));
            }
            
            // Handle multiplication symbols
            correctFormats.push(correctAnswer.replace(/√ó/g, '*'));
            correctFormats.push(correctAnswer.replace(/√ó/g, 'x'));
            
            // Add formatted versions
            correctFormats.push(userAnswer); // Accept the formatted version as-is
            
            const isCorrect = correctFormats.some(format => {
                const cleanUser = normalizedUserAnswer.toLowerCase().replace(/\s/g, '');
                const cleanFormat = normalizeAnswer(format).toLowerCase().replace(/\s/g, '');
                return cleanUser === cleanFormat || userAnswer === format;
            });
            
            if (isCorrect) {
                resultDiv.innerHTML = `
                    <div class="bg-green-50 border border-green-200 p-3 rounded-lg">
                        <span class="text-green-700 font-bold">‚úÖ Benar! Jawaban Anda tepat.</span>
                        <div class="text-xs text-green-600 mt-1">Jawaban: ${userAnswer}</div>
                    </div>
                `;
                inputElement.classList.add('bg-green-50', 'border-green-500');
                
                // Add celebration animation
                inputElement.style.animation = 'pulse 0.5s ease-in-out';
                setTimeout(() => {
                    inputElement.style.animation = '';
                }, 500);
                
            } else {
                resultDiv.innerHTML = `
                    <div class="bg-red-50 border border-red-200 p-3 rounded-lg">
                        <span class="text-red-700 font-bold">‚ùå Belum tepat.</span>
                        <div class="text-xs text-red-600 mt-1">Jawaban yang benar: <code class="bg-gray-100 px-2 py-1 rounded font-mono">${correctAnswer}</code></div>
                        <div class="text-xs text-red-600 mt-1">Jawaban Anda: <code class="bg-gray-100 px-2 py-1 rounded font-mono">${userAnswer}</code></div>
                    </div>
                `;
                inputElement.classList.add('bg-red-50', 'border-red-500');
            }
        }

        function normalizeAnswer(answer) {
            // Convert superscript and subscript back to normal notation for comparison
            let normalized = answer;
            
            // Convert superscripts back to ^ notation
            const superscriptMap = {
                '‚Å∞': '0', '¬π': '1', '¬≤': '2', '¬≥': '3', '‚Å¥': '4',
                '‚Åµ': '5', '‚Å∂': '6', '‚Å∑': '7', '‚Å∏': '8', '‚Åπ': '9',
                '‚Å∫': '+', '‚Åª': '-', '‚Åº': '=', '‚ÅΩ': '(', '‚Åæ': ')',
                '·µÉ': 'a', '·µá': 'b', '·∂ú': 'c', '·µà': 'd', '·µâ': 'e',
                '·∂†': 'f', '·µç': 'g', ' ∞': 'h', '‚Å±': 'i', ' ≤': 'j',
                '·µè': 'k', 'À°': 'l', '·µê': 'm', '‚Åø': 'n', '·µí': 'o',
                '·µñ': 'p', '·µ†': 'q', ' ≥': 'r', 'À¢': 's', '·µó': 't',
                '·µò': 'u', '·µõ': 'v', ' ∑': 'w', 'À£': 'x', ' ∏': 'y', '·∂ª': 'z'
            };
            
            // Convert subscripts back to _ notation
            const subscriptMap = {
                '‚ÇÄ': '0', '‚ÇÅ': '1', '‚ÇÇ': '2', '‚ÇÉ': '3', '‚ÇÑ': '4',
                '‚ÇÖ': '5', '‚ÇÜ': '6', '‚Çá': '7', '‚Çà': '8', '‚Çâ': '9',
                '‚Çä': '+', '‚Çã': '-', '‚Çå': '=', '‚Çç': '(', '‚Çé': ')',
                '‚Çê': 'a', '‚Çë': 'e', '‚Çï': 'h', '·µ¢': 'i', '‚±º': 'j',
                '‚Çñ': 'k', '‚Çó': 'l', '‚Çò': 'm', '‚Çô': 'n', '‚Çí': 'o',
                '‚Çö': 'p', '·µ£': 'r', '‚Çõ': 's', '‚Çú': 't', '·µ§': 'u',
                '·µ•': 'v', '‚Çì': 'x'
            };
            
            // Replace superscripts with ^ notation
            let hasSuperscript = false;
            let superscriptContent = '';
            let result = '';
            
            for (let i = 0; i < normalized.length; i++) {
                const char = normalized[i];
                if (superscriptMap[char]) {
                    if (!hasSuperscript) {
                        result += '^';
                        hasSuperscript = true;
                    }
                    superscriptContent += superscriptMap[char];
                } else {
                    if (hasSuperscript) {
                        result += superscriptContent;
                        hasSuperscript = false;
                        superscriptContent = '';
                    }
                    result += char;
                }
            }
            
            if (hasSuperscript) {
                result += superscriptContent;
            }
            
            return result;
        }
        
        function evaluateFraction(fraction) {
            // Helper function to evaluate simple fractions for comparison
            if (fraction.includes('/')) {
                const parts = fraction.split('/');
                if (parts.length === 2) {
                    const num = parseFloat(parts[0]);
                    const den = parseFloat(parts[1]);
                    if (!isNaN(num) && !isNaN(den) && den !== 0) {
                        return num / den;
                    }
                }
            }
            return null;
        }

        function showHint(inputId, correctAnswer) {
            const resultDiv = document.getElementById(`result-${inputId}`);
            let hint = '';
            
            if (correctAnswer.includes('/')) {
                hint = 'üí° Ingat: bilangan berpangkat negatif = 1 dibagi bilangan berpangkat positif';
            } else if (correctAnswer.includes('^') || correctAnswer.includes('‚Å∞')) {
                hint = 'üí° Gunakan sifat bilangan berpangkat untuk menyederhanakan';
            } else if (!isNaN(correctAnswer)) {
                hint = 'üí° Hitung dengan mengalikan bilangan pokok sebanyak pangkatnya';
            } else {
                hint = 'üí° Perhatikan sifat-sifat bilangan berpangkat yang sudah dipelajari';
            }
            
            resultDiv.innerHTML = `<div class="bg-yellow-50 border border-yellow-200 p-3 rounded-lg"><span class="text-yellow-700">${hint}</span></div>`;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Start with the first tab (definisi)
            showTab('definisi');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96a63f72773adb42',t:'MTc1NDM5NjQxOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
